{"version":3,"file":null,"sources":["../src/util.js","../src/ajax.js","../src/jsonp.js","../src/request.js","../src/defer.js","../src/event.js","../src/plugin.loop.js","../src/plugin.soon.js","../src/default-global-config.js","../src/natty-fetch.js"],"sourcesContent":["export const hasWindow = 'undefined' !== typeof window\nexport const hasConsole = 'undefined' !== typeof console\nexport const doc = hasWindow ? document : null\nexport const escape = encodeURIComponent\nexport const NULL = null\nexport const TRUE = true\nexport const FALSE = !TRUE\nexport const UNDEFINED = 'undefined'\nexport const EMPTY = ''\n\nconst toString = Object.prototype.toString\nconst ARRAY_TYPE = '[object Array]'\nconst OBJECT_TYPE = '[object Object]'\n\n/**\n * 伪造的`promise`对象\n * NOTE 伪造的promise对象要支持链式调用 保证和`new Promise`返回的对象行为一致\n *    dummyPromise.then().catch().finally()\n */\nexport const dummyPromise = {\n  dummy: TRUE,\n}\n\ndummyPromise.then = dummyPromise['catch'] = () => {\n  // NOTE 这里用了剪头函数 不能用`return this`\n  return dummyPromise\n}\n\n/**\n * 判断是否是IE8~11, 不包含Edge\n * @returns {boolean}\n * @note IE11下 window.ActiveXObject的值很怪异, 所以需要追加 'ActiveXObject' in window 来判断\n */\nexport const isIE = hasWindow && (!!window.ActiveXObject || 'ActiveXObject' in window)\n\nexport function noop(v) {\n  return v\n}\n\n/**\n * 变换两个参数的函数到多个参数\n * @param  {Function} fn 基函数\n * @return {Function} 变换后的函数\n * @demo\n *    function add(x, y) { return x+y; }\n *    add = redo(add);\n *    add(1,2,3) => 6\n */\nexport function redo(fn) {\n  return function () {\n    const args = arguments\n    let ret = fn(args[0], args[1])\n    for (let i = 2, l = args.length; i < l; i++) {\n      ret = fn(ret, args[i])\n    }\n    return ret\n  }\n}\n\n// const random = Math.random\n// const floor = Math.floor\n// export function makeRandom() {\n//   return floor(random() * 9e9)\n// }\n\nconst absoluteUrlReg = /^(https?:)?\\/\\//\nexport function isAbsoluteUrl(url) {\n  return !!url.match(absoluteUrlReg)\n}\n\nconst relativeUrlReg = /^[\\.\\/]/\nexport function isRelativeUrl(url) {\n  return !!url.match(relativeUrlReg)\n}\n\nconst BOOLEAN = 'boolean'\nexport function isBoolean(v) {\n  return typeof v === BOOLEAN\n}\n\nconst STRING = 'string'\nexport function isString(v) {\n  return typeof v === STRING\n}\n\nconst FUNCTION = 'function'\nexport function isFunction(v) {\n  return typeof v === FUNCTION\n}\n\nexport function runAsFn(v) {\n  return isFunction(v) ? v() : v\n}\n\nconst NUMBER = 'number'\nexport function isNumber(v) {\n  return !isNaN(v) && typeof v === NUMBER\n}\n\nconst OBJECT = 'object'\nexport function isObject(v) {\n  return typeof v === OBJECT && v !== NULL\n}\n\nexport function isWindow(v) {\n  return v !== NULL && v === v.window\n}\n\n// 参考了zepto\nexport function isPlainObject(v) {\n  return v !== NULL && isObject(v) && !isWindow(v) && Object.getPrototypeOf(v) === Object.prototype\n}\n\nexport function isEmptyObject(v) {\n  let count = 0\n  for (let i in v) {\n    if (v.hasOwnProperty(i)) {\n      count++\n    }\n  }\n  return count === 0\n}\n\nexport function isArray(v) {\n  return toString.call(v) === ARRAY_TYPE\n}\n\n/**\n * 判断是否跨域\n * @type {Element}\n * @note 需要特别关注IE8~11的行为是不一样的!!!\n */\nlet originA\nif(doc) {\n  originA = doc.createElement('a')\n  originA.href = location.href\n}\nexport function isCrossDomain(url) {\n\n  let requestA = doc.createElement('a')\n  requestA.href = url\n\n  // 如果`url`的值不包含`protocol`和`host`(比如相对路径), 在标准浏览器下, 会自定补全`requestA`对象的`protocal`和`host`属性.\n  // 但在IE8~11下, 不会自动补全. 即`requestA.protocol`和`requestA.host`的值都是空的.\n  // 在IE11的不同小版本下, requestA.protocol的值有的是`:`, 有的是空字符串, 太奇葩啦!\n  if (__FALLBACK__) {\n    if (isIE && (requestA.protocol === ':' || requestA.protocol === '')) {\n      if (requestA.hostname === '') {\n        //alert(0)\n        return false\n      } else {\n        //alert('1:'+(originA.hostname !== requestA.hostname || originA.port !== requestA.port))\n        return originA.hostname !== requestA.hostname || originA.port !== requestA.port\n      }\n    }\n  }\n\n  // 标准浏览器\n  return originA.hostname !== requestA.hostname || originA.port !== requestA.port || originA.protocol !== requestA.protocol\n}\n\n/**\n * 对象扩展\n * @param  {Object} receiver\n * @param  {Object} supplier\n * @return {Object} 扩展后的receiver对象\n * @note 这个extend方法是定制的, 不要拷贝到其他地方用!!!\n * @note 这个extend方法是深拷贝方式的!!!\n */\nfunction _extend(receiver = {}, supplier = {}, deepCopy = FALSE) {\n  for (let key in supplier) {\n    // `supplier`中不是未定义的键 都可以执行扩展\n    if (supplier.hasOwnProperty(key) && supplier[key] !== undefined) {\n      if (deepCopy === TRUE) {\n        if (isArray(supplier[key])) {\n          receiver[key] = [].concat(supplier[key])\n        } else if (isPlainObject(supplier[key])) {\n          receiver[key] = extend({}, supplier[key])\n        } else {\n          receiver[key] = supplier[key]\n        }\n      } else {\n        receiver[key] = supplier[key]\n      }\n    }\n  }\n  return receiver\n}\n\nconst extend = redo(_extend)\nexport {extend}\n\n// export function likeArray(v) {\n//   if (!v) {\n//     return false\n//   }\n//   return typeof v.length === NUMBER\n// }\n\n/**\n *\n * @param v {Array|Object} 遍历目标对象\n * @param fn {Function} 遍历器 会被传入两个参数, 分别是`value`和`key`\n */\nexport function each(v, fn) {\n  let i, l\n  if (isArray(v)) {\n    for (i = 0, l = v.length; i < l; i++) {\n      if (fn.call(v[i], v[i], i) === false) return\n    }\n  } else {\n    for (i in v) {\n      if (fn.call(v[i], v[i], i) === false) return\n    }\n  }\n}\n\n/**\n * 将对象的`键`排序后 返回一个新对象\n *\n * @param obj {Object} 被操作的对象\n * @returns {Object} 返回的新对象\n * @case 这个函数用于对比两次请求的参数是否一致\n */\nexport function sortPlainObjectKey(obj) {\n  let clone = {}\n  let key\n  let keyArray = []\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      keyArray.push(key)\n      if (isPlainObject(obj[key])) {\n        obj[key] = sortPlainObjectKey(obj[key])\n      }\n    }\n  }\n  keyArray.sort()\n  for (let i=0, l=keyArray.length; i<l; i++) {\n    clone[keyArray[i]] = obj[keyArray[i]]\n  }\n  return clone\n}\n\nexport function serialize(params, obj, traditional, scope) {\n  let type, array = isArray(obj), hash = isPlainObject(obj)\n  each(obj, function(value, key) {\n    type = toString.call(value)\n    if (scope) {\n      key = traditional ? scope : scope + '[' + (hash || type === OBJECT_TYPE || type === ARRAY_TYPE ? key : '') + ']'\n    }\n\n    // 递归\n    if (!scope && array) {\n      params.add(value.name, value.value)\n    }\n    // recurse into nested objects\n    else if (type == ARRAY_TYPE || (!traditional && type == OBJECT_TYPE)) {\n      serialize(params, value, traditional, key)\n    } else {\n      params.add(key, value)\n    }\n  })\n}\n\n/**\n * 功能和`Zepto.param`一样\n * @param obj {Object}\n * @param traditional {Boolean}\n * @returns {string}\n * $.param({ foo: { one: 1, two: 2 }}) // \"foo[one]=1&foo[two]=2)\"\n * $.param({ ids: [1,2,3] })       // \"ids[]=1&ids[]=2&ids[]=3\"\n * $.param({ ids: [1,2,3] }, true)   // \"ids=1&ids=2&ids=3\"\n * $.param({ foo: 'bar', nested: { will: 'not be ignored' }})  // \"foo=bar&nested[will]=not+be+ignored\"\n * $.param({ foo: 'bar', nested: { will: 'be ignored' }}, true)  // \"foo=bar&nested=[object+Object]\"\n * $.param({ id: function(){ return 1 + 2 } })  // \"id=3\"\n */\nexport function param(obj, traditional) {\n  var params = []\n  params.add = (key, value) => {\n    if (isFunction(value)) value = value()\n    if (value == NULL) value = ''\n    params.push(escape(key) + '=' + escape(value))\n  }\n  serialize(params, obj, traditional)\n  return params.join('&').replace(/%20/g, '+')\n}\n\nexport function decodeParam(str) {\n  return decodeURIComponent(str.replace(/\\+/g, ' '))\n}\n\n// 给URL追加查询字符串\nexport function appendQueryString(url, obj, urlStamp, traditional) {\n  // 是否添加时间戳\n  if (urlStamp) {\n    obj[isBoolean(urlStamp) ? '_stamp' : urlStamp] = +new Date()\n  }\n  let queryString = param(obj, traditional)\n\n  if (queryString) {\n    return url + (~url.indexOf('?') ? '&' : '?') + queryString\n  } else {\n    return url\n  }\n}\n\n// 随机字符串字符集\nconst chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678'\n\n// 创建随机字符串\nexport function makeRandom(n = 6) {\n  let str = ''\n  for (let i = 0; i < n; i++) {\n    str += chars.charAt(Math.floor(Math.random() * chars.length))\n  }\n  return str\n}\n\nexport function makeMessage(str, obj, log = false) {\n  log && hasConsole && console.log(str + '\\n' + JSON.stringify(obj, null, 2))\n  return str\n}","import {\n  extend, appendQueryString, noop, isCrossDomain, isBoolean, param,\n  TRUE, FALSE, NULL, UNDEFINED,\n} from './util'\n\nconst supportCORS = UNDEFINED !== typeof XMLHttpRequest && 'withCredentials' in (new XMLHttpRequest())\nconst GET = 'GET'\nconst SCRIPT = 'script'\nconst XML = 'xml'\nconst JS0N = 'json' // NOTE 不能使用`JSON`，这里用数字零`0`代替了字母`O`\n\n// minetype的简写映射\n// TODO 考虑是否优化\nconst acceptToRequestHeader = {\n  // IIS returns `application/x-javascript` 但应该不需要支持\n  '*':  '*/' + '*',\n  script: 'text/javascript, application/javascript, application/ecmascript, application/x-ecmascript',\n  json:   'application/json, text/json',\n  xml:  'application/xml, text/xml',\n  html:   'text/html',\n  text:   'text/plain',\n}\n\n// 设置请求头\n// 没有处理的事情：跨域时使用者传入的多余的Header没有屏蔽 没必要\nconst setHeaders = (xhr, options) => {\n\n  const header = {\n    Accept: acceptToRequestHeader[options.accept],\n  }\n\n  // 如果没有跨域 则打该标识 业界通用做法\n  if (!isCrossDomain(options.url)) {\n    header['X-Requested-With'] = 'XMLHttpRequest'\n  }\n\n  // 如果POST方法，没有明确指定编码方式，默认urlencoded，\n  // TODO v3.x将去掉改处理！！！需要文档强调\n  if (options.method === 'POST' && !header['Content-Type']) {\n    header['Content-Type'] = 'application/x-www-form-urlencoded'\n  }\n\n  extend(header, options.header)\n\n  for (let key in header) {\n    xhr.setRequestHeader(key, header[key])\n  }\n\n  return header\n}\n\n// 绑定事件\n// NOTE 还得继续使用readystatechange事件\n//    比较遗憾 到现在了依然不能安全的使用load和error等事件 就连PC端的chrome都有下面的问题\n//    500: 触发load loadend 不触发error\n//    404: 触发load loadend 不触发error\nconst setEvents = (xhr, options) => {\n\n  // 再高级的浏览器都有低级错误! 已经不能在相信了!\n  // MAC OSX Yosemite Safari上的低级错误: 一次`ajax`请求的`loadend`事件完成之后,\n  // 如果执行`xhr.abort()`, 居然还能触发一遍`abort`和`loadend`事件!!!\n  // `_finished`标识一次完整的请求是否结束, 如果已结束, 则不再触发任何事件\n  xhr._finished = FALSE\n\n  const readyStateChangeFn = () => {\n    // console.log('xhr.status', xhr.status)\n    if (xhr._finished) {\n      return\n    }\n    //console.log('xhr.readyState', xhr.readyState, 'xhr.status', xhr.status, xhr)\n    if (xhr.readyState === 4) {\n      // 如果请求被取消(aborted) 则`xhr.status`会是0 所以不会进入`success`回调\n      if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\n        //let mime = xhr.getResponseHeader('Content-Type')\n        let data = xhr.responseText\n        switch (options.accept) {\n          case JS0N:\n            try {\n              data = JSON.parse(data)\n            } catch (e) {\n              console.warn('The response can NOT be parsed to JSON object.', data)\n            }\n            break\n          case SCRIPT:\n            (1, eval)(data)\n            break\n          case XML:\n            data = xhr.responseXML\n            break\n          //case HTML:\n          //case TEXT:\n          default:\n            break\n        }\n        options.success(data, xhr)\n      } else {\n        // 因为取消时会先触发原生的`onreadystatechange`响应，后触发`onAbort`回调，所以\n        // 如果请求被取消(aborted) 则`xhr.status`会是0 程序走到这里的时候，`xhr._aborted`状态是false，\n        // 需要排除，不应该触发`error`回调\n        !xhr._aborted && options.error(xhr.status, xhr)\n      }\n    }\n  }\n\n  // readyState value:\n  //   0: UNSET 未初始化\n  //   1: OPENED\n  //   2: HEADERS_RECEIVED\n  //   3: LOADING\n  //   4: DONE 此时触发load事件\n  xhr.addEventListener(\"readystatechange\", readyStateChangeFn)\n\n  const abortFn = () => {\n    if (xhr._finished) {\n      return\n    }\n    options.abort(xhr.status, xhr)\n  }\n\n  xhr.addEventListener('abort', abortFn)\n\n  const loadedFn = () => {\n    if (xhr._finished) {\n      return\n    }\n    xhr._finished = true\n    options.complete(xhr.status, xhr)\n    delete xhr._aborted\n  }\n\n  xhr.addEventListener('loadend', loadedFn)\n}\n\nconst defaultOptions = {\n  url: '',\n  mark: {},\n  urlMark: TRUE,\n  method: GET,\n  accept: '*',\n  data: NULL,\n  header: {},\n  withCredentials: NULL, // 根据`url`是否跨域决定默认值. 如果显式配置该值(必须是布尔值), 则个使用配置值\n  urlStamp: TRUE,\n  success: noop,\n  error: noop,\n  complete: noop,\n  abort: noop,\n  query: {},\n  log: FALSE,\n  traditional: FALSE,\n}\n\nexport default function ajax(options) {\n\n  options = extend({}, defaultOptions, options)\n\n  // 是否跨域\n  let isCD = isCrossDomain(options.url)\n\n  let xhr = new XMLHttpRequest()\n\n  setEvents(xhr, options)\n\n  xhr.open(options.method, appendQueryString(\n    options.url,\n    extend({}, options.urlMark ? options.mark : {}, options.method === GET ? options.data : {}, options.query),\n    options.urlStamp,\n    options.traditional\n  ))\n\n  // NOTE 生产环境的Server端, `Access-Control-Allow-Origin`的值一定不要配置成`*`!!! 而且`Access-Control-Allow-Credentials`应该是true!!!\n  // NOTE 如果Server端的`responseHeader`配置了`Access-Control-Allow-Origin`的值是通配符`*` 则前端`withCredentials`是不能使用true值的\n  // NOTE 如果Client端`withCredentials`使用了true值 则后端`responseHeader`中必须配置`Access-Control-Allow-Credentials`是true\n  xhr.withCredentials = isBoolean(options.withCredentials) ? options.withCredentials : isCD\n\n  // 设置requestHeader\n  const header = setHeaders(xhr, options)\n\n  let data\n\n  if (header['Content-Type'] && ~header['Content-Type'].indexOf('application/x-www-form-urlencoded')) {\n    data = param(options.data, options.traditional)\n  } else {\n    data = JSON.stringify(options.data)\n  }\n\n  // 文档建议说 send方法如果不发送请求体数据 则null参数在某些浏览器上是必须的\n  xhr.send(options.method === GET ? NULL : data === NULL ? NULL : data)\n\n  let originAbort = xhr.abort\n\n  // 重写`abort`方法\n  xhr.abort = () => {\n    xhr._aborted = true\n    // NOTE 直接调用`originAbort()`时 浏览器会报 `Illegal invocation` 错误\n    originAbort.call(xhr)\n  }\n\n  return xhr\n}\n\n// 移动端不需要fallback\najax.fallback = false\najax.supportCORS = supportCORS","import {appendQueryString, noop, extend, makeRandom, hasWindow, NULL, TRUE, FALSE} from './util'\nconst win = hasWindow ? window : NULL\nconst doc = hasWindow ? document : NULL\nconst SCRIPT = 'script'\n\nconst removeScript = script => {\n  script.onerror = NULL\n  script.parentNode.removeChild(script)\n  script = NULL\n}\nlet head = NULL\nconst insertScript = (url, options) => {\n  let script = doc.createElement(SCRIPT)\n  script.src = url\n  script.async = true\n\n  if (options.crossOrigin) {\n    script.crossOrigin = true\n  }\n\n  script.onerror = e => {\n    win[options.callbackName] = NULL\n    options.error(e)\n    options.complete()\n  }\n\n  head = head || doc.getElementsByTagName('head')[0]\n  head.insertBefore(script, head.firstChild)\n  return script\n}\n\nconst defaultOptions = {\n  url: '',\n  mark: {},\n  urlMark: TRUE,\n  data: {},\n  urlStamp: TRUE,\n  success: noop,\n  error: noop,\n  complete: noop,\n  log: FALSE,\n  flag: 'callback',\n  callbackName: 'jsonp{id}',\n  traditional: FALSE,\n  crossOrigin: FALSE,\n}\n\nexport default function jsonp(options) {\n\n  options = extend({}, defaultOptions, options)\n\n  const callbackName = options.callbackName = options.callbackName.replace(/\\{id\\}/, makeRandom(6))\n\n  const originComplete = options.complete\n\n  let script\n\n  // 二次包装的`complete`回调\n  options.complete = () => {\n    // 删除脚本\n    removeScript(script)\n    originComplete()\n  }\n\n  // 成功回调\n  win[callbackName] = data => {\n    // JSONP函数需要立即删除 用于`IE8`判断是否触发`onerror`\n    win[callbackName] = NULL\n    options.success(data)\n    options.complete()\n  }\n\n  // 生成`url`\n  let url = appendQueryString(\n    options.url,\n    extend({[options.flag]: callbackName}, options.urlMark ? options.mark : {}, options.data),\n    options.urlStamp,\n    options.traditional\n  )\n\n  // 插入脚本\n  script = insertScript(url, options)\n  \n  return {\n    abort() {\n      // 覆盖成功回调为无数据处理版本\n      win[callbackName] = () => {\n        win[callbackName] = NULL\n      }\n      removeScript(script)\n    },\n  }\n}\n","import {extend, NULL, TRUE, FALSE, isAbsoluteUrl, isRelativeUrl, EMPTY, makeRandom, makeMessage} from './util'\nimport ajax from './__AJAX__'\nimport jsonp from './__JSONP__'\n\nexport default class Request {\n  constructor(apiInstance) {\n    const {_path, config, api, contextId} = apiInstance\n\n    this._apiInstance = apiInstance\n\n    // 单次请求实例的id，用于从`api`实例的`_pendingList`中删除请求实例\n    this._rid = [contextId, _path, makeRandom(6)].join('-')\n\n    this._path = _path\n    this.config = config\n    this.storage = api.storage\n    this.contextId = contextId\n\n    // 工作状态\n    this.pending = FALSE\n    this._requester = NULL\n  }\n\n  // 发起网络请求 返回一个Promise实例\n  send({vars, onSuccess, onError, onComplete}) {\n\n    this.vars = vars\n\n    this.onSuccess = onSuccess\n    this.onError = onError\n    this.onComplete = onComplete\n\n    const {config} = this\n\n    // 调用 willFetch 钩子\n    config.willFetch(vars, config, 'remote')\n\n    // 等待状态在此处开启 在相应的`requester`的`complete`回调中关闭\n    this.pending = TRUE\n\n    // 创建请求实例requester\n    if (config.customRequest) {\n      // 使用私有的request方法\n      this._requester = config.customRequest(vars, config, (isSuccess, response) => {\n        // 当isSuccess为false时，response的结构应该是 {message: 'xxx'}\n        isSuccess ? this.processResponse(response) : this.onError(response)\n      })\n    } else if (config.jsonp) {\n      this._requester = this.jsonp()\n    } else {\n      this._requester = this.ajax()\n    }\n\n    vars.requester = this._requester\n\n    // 超时处理\n    if (0 !== config.timeout) {\n      setTimeout(() => {\n        if (this.pending) {\n          // 取消请求\n          this.abort()\n\n          const error = {\n            timeout: TRUE,\n            message: makeMessage('Request Timeout', {\n              context: this.contextId,\n              api: `${vars.api}`,\n              timeout: config.timeout + 'ms',\n            }, config.log),\n          }\n\n          this.onError(error)\n        }\n      }, config.timeout)\n    }\n  }\n\n  // 处理结构化的响应数据\n  processResponse(response) {\n    const {config, vars} = this\n    // 调用 didFetch 钩子函数\n    config.didFetch(vars, config)\n\n    // 非标准格式数据的预处理\n    response = config.fit(response, vars)\n\n    if (response.success) {\n      // 数据处理\n      const content = config.process(response.content, vars)\n      this.onSuccess(content)\n    } else {\n      const error = extend({\n        message: 'Error in request: ' + this._path,\n      }, response.error)\n      // NOTE response是只读的对象!!!\n      this.onError(error)\n    }\n  }\n\n  // 获取正式接口的完整`url`\n  // @param config {Object}\n  getFinalUrl() {\n    const {config, vars} = this\n    let url = config.mock ? config.mockUrl : config.url\n    if (!url) return EMPTY\n    const prefixKey = config.mock ? 'mockUrlPrefix' : 'urlPrefix'\n    const suffixKey = config.mock ? 'mockUrlSuffix' : 'urlSuffix'\n    const prefix = config[prefixKey] && !isAbsoluteUrl(url) && !isRelativeUrl(url) ? config[prefixKey] : EMPTY\n    const suffix = config[suffixKey] ? config[suffixKey]: EMPTY\n\n    url = prefix + url + suffix\n\n    // 如果是RESTFul API，填充所有的':x'参数\n    if (config.rest) {\n      const restData = vars.data\n      for (let param in restData) {\n        if (restData.hasOwnProperty(param) && ~param.indexOf(':')) {\n          url = url.replace(new RegExp('\\\\/' + param), '/' + restData[param])\n          delete restData[param]\n        }\n      }\n    }\n\n    return url\n  }\n\n  // 发起Ajax请求\n  // @returns {Object} xhr对象实例\n  ajax() {\n    const {config, vars} = this\n\n    const url = this.getFinalUrl()\n\n    return ajax({\n      traditional: config.traditional,\n      urlStamp: config.urlStamp,\n      mark: vars.mark,\n      urlMark: config.urlMark,\n      log: config.log,\n      url: url,\n      method: config.method,\n      data: vars.data,\n      header: config.header,\n      query: config.query,\n      withCredentials: config.withCredentials,\n      // 强制约定json\n      accept: 'json',\n      success: response => {\n        this.processResponse(response)\n      },\n      error: status => {\n        // 如果跨域使用了自定义的header，且服务端没有配置允许对应的header，此处status为0，目前无法处理。\n        const error = {\n          status,\n          message: makeMessage(`Request Error(Status: ${status})`, {\n            status: status,\n            context: this.contextId,\n            api: vars.api,\n            url: url,\n          }, config.log),\n        }\n        this.onError(error)\n      },\n      complete: () => {\n        this.onComplete()\n        this.pending = FALSE\n        this._requester = NULL\n      },\n    })\n  }\n\n  // 发起jsonp请求\n  // @returns {Object} 带有abort方法的对象\n  jsonp() {\n    const {config, vars} = this\n\n    const url = this.getFinalUrl()\n\n    return jsonp({\n      traditional: config.traditional,\n      log: config.log,\n      mark: vars.mark,\n      urlMark: config.urlMark,\n      url: url,\n      data: vars.data,\n      urlStamp: config.urlStamp,\n      flag: config.jsonpFlag,\n      callbackName: config.jsonpCallbackName,\n      crossOrigin: config.jsonpCrossOrigin,\n      success: response => {\n        this.processResponse(response)\n      },\n      error: () => {\n        const error = {\n          message: makeMessage('Request Error(Not Accessable JSONP)', {\n            context: this.contextId,\n            api: vars.api,\n            url: url,\n          }, config.log),\n        }\n        this.onError(error)\n      },\n      complete: () => {\n        this.onComplete()\n        this.pending = FALSE\n        this._requester = NULL\n      },\n    })\n  }\n\n  // 取消请求\n  abort() {\n    if (this._requester) {\n      this._requester.abort()\n    }\n  }\n}","export default class Defer {\n  constructor(Promise) {\n    const t = this\n    t.promise = new Promise(function (resolve, reject) {\n      t._resolve = resolve\n      t._reject = reject\n    })\n  }\n\n  resolve(value) {\n    this._resolve.call(this.promise, value)\n  }\n\n  reject(reason) {\n    this._reject.call(this.promise, reason)\n  }\n}","const PREFIX = '_'\nfunction rename (type) {\n  return PREFIX + type\n}\n\nexport default {\n  on: function () {\n    const args = arguments\n    if (typeof args[0] === 'string' && typeof args[1] === 'function') {\n      const type = rename(args[0])\n      this[type]  = this[type] || []\n      this[type].push(args[1])\n    } else if (typeof args[0] === 'object') {\n      const hash = args[0]\n      for (let i in hash) {\n        if (hash.hasOwnProperty(i)) {\n          this.on(i, hash[i])\n        }\n      }\n    }\n  },\n  off: function (type, fn) {\n    type = rename(type)\n    if (!fn) {\n      delete this[type]\n    } else {\n      const fns = this[type]\n      fns.splice(fns.indexOf(fn), 1)\n      if (!this[type].length) {\n        delete this[type]\n      }\n    }\n  },\n  // @param {array} args\n  fire: function (type, args, context) {\n    const fns = this[rename(type)]\n    if (!fns) return 'NO_EVENT'\n    for (let i=0, l=fns.length; i<l; i++) {\n      fns[i].apply(context || this, [].concat(args))\n    }\n  },\n  hasEvent: function (type) {\n    return !!this[rename(type)]\n  },\n}","import {isNumber, noop, TRUE, FALSE, NULL} from './util'\n\n/**\n * 创建轮询支持\n * @param api {Function} 需要轮询的函数\n */\nexport default function() {\n  const {api} = this\n\n  api.loop = (options, resolveFn = noop, rejectFn = noop) => {\n    if (!options.duration || !isNumber(options.duration)) {\n      throw new Error('Illegal `duration` value for `startLoop` method.')\n    }\n\n    let loopTimer = NULL\n\n    let stop = () => {\n      clearTimeout(loopTimer)\n      loopTimer = NULL\n      stop.looping = FALSE\n    }\n\n    let sleepAndRequest = () => {\n      stop.looping = TRUE\n      api(options.data).then(resolveFn, rejectFn)\n      loopTimer = setTimeout(() => {\n        sleepAndRequest()\n      }, options.duration)\n    }\n\n    sleepAndRequest()\n    \n    return stop\n  }\n}\n","import {noop, FALSE, TRUE, hasConsole} from './util'\n\nexport default function() {\n  const {api} = this\n  api.soon = (data, successFn = noop, errorFn = noop) => {\n    const vars = this.makeVars(data)\n\n    // 先尝试用`storage`数据快速响应\n    if (api.storageUseable) {\n\n      const result = api.storage.has(vars.queryString)\n\n      if (result.has) {\n        successFn({\n          fromStorage: TRUE,\n          content: result.value,\n        })\n      }\n    }\n\n    // 再发起网络请求(内部会更新`storage`)\n    this.send(vars).then(content => {\n      successFn({\n        fromStorage: FALSE,\n        content,\n      })\n    }, error => {\n      errorFn(error)\n    })['catch'](function (e) {\n      hasConsole && console.error(e)\n    })\n  }\n}","import {noop, NULL, TRUE, FALSE, EMPTY, hasWindow} from './util'\n\nconst config = {\n\n  // 默认参数\n  data: {},\n\n  // 请求完成钩子函数\n  didFetch: noop,\n\n  // 预处理回调\n  fit: noop,\n\n  // 自定义header, 只针对非跨域的ajax有效, 跨域时将忽略自定义header\n  header: {},\n\n  // 是否忽律接口自身的并发请求\n  ignoreSelfConcurrent: FALSE,\n\n  // 有两种格式配置`jsonp`的值\n  // {Boolean}\n  // {Array} eg: [TRUE, 'cb', 'j{id}']\n  jsonp: FALSE,\n\n  // 是否在`jsonp`的`script`的标签上加`crossorigin`属性\n  jsonpCrossOrigin: FALSE,\n\n  // 是否开启log信息\n  log: FALSE,\n\n  // 非GET方式对JSONP无效\n  method: 'GET',\n\n  // 是否开启mock模式\n  mock: FALSE,\n\n  mockUrl: EMPTY,\n\n  // 全局`mockUrl`前缀\n  mockUrlPrefix: EMPTY,\n\n  // 全局`mockUrl`后缀\n  mockUrlSuffix: EMPTY,\n\n  // 成功回调\n  process: noop,\n\n  // 私有Promise对象, 如果不想用浏览器原生的Promise对象的话\n  Promise: hasWindow ? window.Promise : NULL,\n\n  // 是否是rest风格\n  rest: FALSE,\n\n  // 默认不执行重试\n  retry: 0,\n\n  query: {},\n\n  // 使用已有的request方法\n  customRequest: NULL,\n\n  // 0表示不启动超时处理\n  timeout: 0,\n\n  // http://zeptojs.com/#$.param\n  traditional: FALSE,\n\n  url: EMPTY,\n\n  // 全局`url`前缀\n  urlPrefix: EMPTY,\n\n  // 是否在`url`上添加辅助开发的标记，如`_api=xxx&_mock=false`\n  urlMark: true,\n\n  // 是否在`url`上添加时间戳，如`_stamp=xxx`，用于避免浏览器的304缓存\n  urlStamp: TRUE,\n\n  // 全局`url`后缀\n  urlSuffix: EMPTY,\n\n  // TODO 文档中没有暴露\n  withCredentials: NULL,\n\n  // 请求之前调用的钩子函数\n  willFetch: noop,\n\n  // 扩展: storage\n  storage: FALSE,\n\n  // 插件，已内置两种\n  // plugins: [\n  //   nattyFetch.plugin.loop\n  //   nattyFetch.plugin.soon\n  // ]\n  plugins: FALSE,\n}\n\nexport default config","import nattyStorage from 'natty-storage'\nimport * as util from './util'\n\nconst {\n  extend, runAsFn, isBoolean,\n  isArray, isFunction, sortPlainObjectKey, isEmptyObject,\n  isPlainObject, dummyPromise,\n  isString, NULL, TRUE, FALSE, hasConsole, makeRandom,\n} = util\n\nimport Request from './request'\nimport ajax from './__AJAX__'\nimport Defer from './defer'\nimport event from './event'\n\n// 内置插件\nimport pluginLoop from './plugin.loop'\nimport pluginSoon from './plugin.soon'\n\n// 全局默认配置\nimport defaultGlobalConfig from './default-global-config'\n\n// 随`setGlobal`方法而变化的运行时全局配置\nlet runtimeGlobalConfig = extend({}, defaultGlobalConfig)\n\nclass API {\n  constructor(path, options, contextConfig, contextId) {\n    this._path = path\n\n    this.contextConfig = contextConfig\n\n    this.contextId = contextId\n\n    // 进行中的请求列队\n    this._pendingList = []\n\n    this.storage = NULL\n\n    const config = this.config = this.processAPIOptions(options)\n\n    // `api`的实现\n    // @param data {Object|Function}\n    // @returns {Object} Promise Object\n    this.api = data => {\n\n      // 处理列队中的请求\n      if (this._pendingList.length) {\n        // 是否忽略自身的并发请求\n        if (config.ignoreSelfConcurrent) {\n          return dummyPromise\n        }\n        // 是否取消上一个请求\n        if (config.overrideSelfConcurrent) {\n          this._pendingList[0].abort()\n        }\n      }\n\n      const vars = this.makeVars(data)\n\n      if (this.api.storageUseable) {\n        const result = this.api.storage.has(vars.queryString)\n        if (result.has) {\n          return new config.Promise(resolve => {\n            resolve(result.value)\n          })\n        } else {\n          return config.retry === 0 ? this.send(vars) : this.sendWithRetry(vars)\n        }\n      } else {\n        return config.retry === 0 ? this.send(vars) : this.sendWithRetry(vars)\n      }\n    }\n\n    this.api.config = config\n\n    this.api.hasPending = () => {\n      return !!this._pendingList.length\n    }\n\n    // 要删除的方法，这个地方是`v2.3.0`版本之前都存在的设计错误，因为：\n    // io.get().then(...) 发送第一次\n    // io.get().then(...) 发送第二次\n    // io.get.abort()   取消哪一次? 并发情况复杂的业务，结果不明确。\n    // 当前的解决方式是取消所有，不完美\n    this.api.abort = () => {\n      hasConsole && console.warn('`abort` method will be deleted later!')\n      for (let i=0, l=this._pendingList.length; i<l; i++) {\n        this._pendingList[i].abort()\n      }\n    }\n\n    this.initStorage()\n\n    // 启动插件\n    let plugins = isArray(config.plugins) ? config.plugins : []\n\n    for (let i=0, l=plugins.length; i<l; i++) {\n      isFunction(plugins[i]) && plugins[i].call(this, this)\n    }\n  }\n\n  // @param {Object} 一次独立的请求数据\n  makeVars(data) {\n    const {config} = this\n    // 每次请求私有的相关数据\n    const vars = {\n      // `url`中的标记\n      mark: {\n        _api: this._path,\n        _mock: config.mock,\n      },\n      // 此api是定义接口时的多层级命名路径(如：'foo.bar.getList')，不是发起请求时的url地址\n      api: this._path,\n      mock: config.mock,\n      // 上下文id值，如果在调用nattyFetch.context方法时没有指定上下文的名称，默认采用c0，c1\n      contextId: this.contextId,\n    }\n\n    // `data`必须在请求发生时实时创建\n    // 另外，将数据参数存在私有标记中, 方便API的`process`方法内部使用\n    data = extend({}, runAsFn(config.data), runAsFn(data))\n\n    // 承载请求参数数据\n    vars.data = data\n\n    // 根据`data`创建`storage`查询用的`key`\n    if (this.api.storageUseable) {\n      vars.queryString = isEmptyObject(data) ? 'no-query-string' : JSON.stringify(sortPlainObjectKey(data))\n    }\n\n    return vars\n  }\n\n  // 发送真正的网络请求\n  send(vars) {\n    const {config} = this\n\n    // 每次请求都创建一个请求实例\n    const request = new Request(this)\n\n    this._pendingList.push(request)\n\n    const defer = new Defer(config.Promise)\n\n    request.send({\n      vars,\n      onSuccess: content => {\n        if (this.api.storageUseable) {\n          this.api.storage.set(vars.queryString, content)\n        }\n        defer.resolve(content)\n        event.fire('g.resolve', [content, config], config)\n        event.fire(this.contextId + '.resolve', [content, config], config)\n      },\n      onError: error => {\n        defer.reject(error)\n        event.fire('g.reject', [error, config, vars], config)\n        event.fire(this.contextId + '.reject', [error, config, vars], config)\n      },\n      onComplete: () => {\n        let indexToRemove\n        for (let i=0, l=this._pendingList.length; i<l; i++) {\n          if (this._pendingList[i] === request) {\n            indexToRemove = i\n            break\n          }\n        }\n        indexToRemove !== undefined && this._pendingList.splice(indexToRemove, 1)\n      },\n    })\n\n    return defer.promise\n  }\n\n  sendWithRetry(vars) {\n    const {config} = this\n\n    return new config.Promise((resolve, reject) => {\n\n      let retryTime = 0\n      const sendOneTime = () => {\n        // 更新的重试次数\n        vars.mark._retryTime = retryTime\n        this.send(vars).then(content => {\n          resolve(content)\n        }, error => {\n          if (retryTime === config.retry) {\n            reject(error)\n          } else {\n            retryTime++\n            sendOneTime()\n          }\n        })\n      }\n      sendOneTime()\n    })\n  }\n\n  // 处理API的配置\n  // @param options {Object}\n  processAPIOptions(options) {\n\n    // 插件是不能覆盖的, 应该追加\n    const plugins = [].concat(this.contextConfig.plugins || [], options.plugins || [])\n\n    const config = extend({}, this.contextConfig, options, {\n      plugins,\n    })\n\n    // 按照[boolean, callbackKeyWord, callbackFunctionName]格式处理\n    if (isArray(options.jsonp)) {\n      config.jsonp = isBoolean(options.jsonp[0]) ? options.jsonp[0] : FALSE\n      // 这个参数只用于jsonp\n      if (config.jsonp) {\n        config.jsonpFlag = options.jsonp[1]\n        config.jsonpCallbackName = options.jsonp[2]\n      }\n    }\n\n    // 配置自动增强 如果`url`的值有`.jsonp`结尾 则认为是`jsonp`请求\n    // NOTE jsonp是描述正式接口的 不影响mock接口!!!\n    if (!config.mock && !!config.url.match(/\\.jsonp(\\?.*)?$/)) {\n      config.jsonp = TRUE\n    }\n\n    return config\n  }\n\n  // 初始化缓存对象\n  initStorage() {\n    const {config} = this\n\n    // 简易开启缓存的写法\n    if (config.storage === TRUE) {\n      config.storage = {\n        type: 'variable',\n      }\n    }\n\n    // 综合判断缓存是不是可以启用\n    this.api.storageUseable = isPlainObject(config.storage)\n      && (config.method === 'GET' || config.jsonp)\n      && (\n        nattyStorage.supportStorage\n        && (\n          ['localStorage', 'sessionStorage'].indexOf(config.storage.type) > -1\n          || config.storage.type === 'variable'\n        )\n      )\n\n    // 创建缓存实例\n    if (this.api.storageUseable) {\n      // 当使用`localStorage`时, 强制指定`key`值。如果没指定, 抛错!\n      // 当使用`variable`或`sessionStorage`时, 如果没指定`key`, 则自动生成内部`key`\n      // !!!为什么在使用`localStorage`时必须指定`key`值???\n      // !!!因为当key发生变化时, `localStorage`很容易产生死数据, 必须强制开发者有意识的去维护`key`值\n      if (config.storage.type === 'localStorage') {\n        if (!config.storage.hasOwnProperty('key') || !config.storage.key) {\n          throw new Error('`key` is required when `storage.type` is `localStorage`.')\n        }\n      } else {\n        config.storage.key = config.storage.key || [this.contextId, this._path].join('_')\n      }\n\n      // `key`和`tag`的选择原则:\n      // `key`只选用相对稳定的值, 减少因为`key`的改变而增加的残留缓存\n      // 经常变化的值用于`tag`, 如一个接口在开发过程中可能使用方式不一样, 会在`jsonp`和`get`之间切换。\n      this.api.storage = nattyStorage(extend({}, config.storage, {\n        tag: [\n          config.storage.tag,\n          config.jsonp ? 'jsonp' : config.method,\n          config.url,\n        ].join('_'), // 使用者的`tag`和内部的`tag`, 要同时生效\n      }))\n    }\n  }\n}\n\nconst context = (contextId, options) => {\n  if (isString(contextId)) {\n    options = options || {}\n  } else {\n    options = contextId || {}\n    contextId = 'c' + makeRandom()\n  }\n\n  const storage = nattyStorage({\n    type: 'variable',\n    key: contextId,\n  })\n\n  const ctx = {}\n\n  ctx.api = storage.get()\n\n  ctx._contextId = contextId\n\n  // 插件是不能覆盖的, 应该追加\n  let plugins = [].concat(runtimeGlobalConfig.plugins || [], options.plugins || [])\n\n  ctx._config = extend({}, runtimeGlobalConfig, options, {\n    plugins,\n  })\n\n  // 创建api\n  // @param namespace {String} optional\n  // @param APIs {Object} 该`namespace`下的`api`配置\n  ctx.create = function(namespace, APIs) {\n    let hasNamespace = arguments.length === 2 && isString(namespace)\n\n    if (!hasNamespace) {\n      APIs = namespace\n    }\n\n    for (let path in APIs) {\n      if (APIs.hasOwnProperty(path)) {\n        storage.set(\n          hasNamespace ? namespace + '.' + path : path,\n          new API(\n            hasNamespace ? namespace + '.' + path : path,\n            runAsFn(APIs[path]),\n            ctx._config,\n            contextId\n          ).api\n        )\n      }\n    }\n\n    ctx.api = storage.get()\n  }\n\n  // 绑定上下文事件\n  ctx.on = function(name, fn) {\n    if (!isFunction(fn)) return\n    event.on(ctx._contextId + '.' + name, fn)\n    return ctx\n  }\n\n  return ctx\n}\n\nconst nattyFetch = {}\n\n// 简易接口\n// @param options\nnattyFetch.create = function (options) {\n  return new API('nattyFetch', runAsFn(options), defaultGlobalConfig, 'global').api\n}\n\nextend(nattyFetch, {\n  onlyForModern: !__FALLBACK__, // eslint-disable-line\n  version: '__VERSION__',\n  _util: util,\n  _event: event,\n  _ajax: ajax,\n  context,\n\n  // 执行全局配置\n  // @param options\n  setGlobal(options) {\n    runtimeGlobalConfig = extend({}, defaultGlobalConfig, options)\n    return this\n  },\n\n  // 获取全局配置\n  // @param property {String} optional\n  // @returns {*}\n  getGlobal(property) {\n    return property ? runtimeGlobalConfig[property] : runtimeGlobalConfig\n  },\n\n  // 绑定全局事件\n  on(name, fn) {\n    if (!isFunction(fn)) return\n    event.on('g.' + name, fn)\n    return this\n  },\n\n  // 插件名称空间\n  plugin: {\n    loop: pluginLoop,\n    soon: pluginSoon,\n  },\n})\n\n// 内部直接将运行时的全局配置初始化到默认值\nnattyFetch.setGlobal(defaultGlobalConfig)\n\nexport default nattyFetch"],"names":["const","hasConsole","NULL","TRUE","FALSE","dummyPromise","let","isBoolean","isString","isFunction","runAsFn","isPlainObject","isEmptyObject","isArray","extend","sortPlainObjectKey","makeRandom","doc","SCRIPT","defaultOptions","this","param","defaultGlobalConfig","config"],"mappings":"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"}